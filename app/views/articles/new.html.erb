<div class = "container" >
	<div class = "row" >
<div class = "col-md-12 article-list">
	<h1>記事投稿</h1>
        <div class ="article-list_article-new">
        <h3>記事を投稿する</h3>
        <%= form_for(@article, url:articles_path) do |f| %>
          <%= f.label :area_id %><br>
          <%= f.collection_select :area_id, Area.all, :id, :area_name, class: "col-xs-12", id: 'article_area_id' %><br>
            <div class = "prefecture">
              <%= render partial: 'select_prefecture', locals: {area_id: Area.first.id}, class: "col-xs-12"%>
            </div>
          <%= f.text_field :title, class: "col-xs-12" %><br>
          <%= f.text_area :body, class: "col-xs-12" %><br>
          <%= f.attachment_field :article_images_images, multiple: true, id: "image_file" %>
          <%= f.submit "記事を投稿する", class: "btn btn-primary btn-lg btn-block"%>
          <%end%>
      </div>
    </div>
  </div>
</div>

<script>
  // idについてクリック等のイベントが生じたら、eいかを実行せよという命令。e＝イベント情報を示す。EventListenerとは、イベントを拾う（今回でいうclick）
  submit_button.addEventListener('click',(e)=>{
    e.preventDefault();
    // preventDefault()=クリックイベントを無効化。無効化しないと無条件にデータを送信してします。
    var files = document.getElementById("image_file").files;
    // <div><h1>は全てElement。なので、select_fileという名前がついたid(Element)を呼び出す
    // lengthが選んだファイルの数。lengthで数え上げている。filesがhtml上の選択ボックスのtype
    if(files.length>10){
      alert('画像ファイルは10枚以内で投稿して下さい')
    }
    else{
       document.form.submit()
       // このformは5行目で任意につけたフォーム。このdocument.form.submit()で、preventDefault();で無効化したものを再度有効化している。
    }
  });
</script>